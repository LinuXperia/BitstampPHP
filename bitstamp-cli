#!/usr/bin/php
<?php
require __DIR__ . '/vendor/autoload.php';
require __DIR__.'/lib/class.BitstampNet.php';
require __DIR__.'/lib/debug.php';

$localConfig = array();
if (file_exists(__DIR__.'/config-local.php')) {
    require __DIR__.'/config-local.php';
}

$cli = new Mx17\BitstampPHP\BitstampNet($localConfig);

$data = $cli->ticker();
printTable(array($data));
//echo "ticker: ".print_r($data, 1)."\n";

//$data = $cli->tickerHour();
//echo "ticker_hour: ".print_r($data, 1)."\n";

//$data = $cli->orderBook();
//echo "ticker_hour: ".print_r($data, 1)."\n";

//echo "== Transactions\n";
//$data = $cli->transactions();
//printTable($data);

//$data = $cli->conversionRate();
//echo "conversionRate: ".print_r($data, 1)."\n";

//$data = $cli->balance();
//echo "balance: ".print_r($data, 1)."\n";

echo "== All open orders\n";
$data = $cli->openOrders();
printTable($data);

echo "== User transactions\n";
$data = $cli->userTransactions(0, 10, 'desc');
printTable($data);

//echo "== Open new order\n";
//$data = $cli->buy(1, 25);
//echo print_r($data, 1)."\n";
//$orderId = $data['id'];
//
//echo "== Open new order\n";
//$data = $cli->buy(1, 25.5, 9000);
//echo print_r($data, 1)."\n";
//$orderId = $data['id'];

//echo "== Order status $orderId\n";
//$data = $cli->orderStatus($orderId);
//echo print_r($data, 1)."\n";

//echo "== All open orders\n";
//$data = $cli->openOrders();
//printTable($data);

//$data = $cli->cancelOrder($orderId);
//echo print_r($data, 1)."\n";

//echo "== Cancel all orders\n";
//$data = $cli->cancelAllOrders();
//echo print_r($data, 1)."\n";

//echo "== All open orders\n";
//$data = $cli->openOrders();
//printTable($data);


// vim: syntax=php
